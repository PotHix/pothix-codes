require "rspec"
require File.expand_path(__FILE__).gsub("_spec","")

TEXT_A = "cstfcg tscsmtvb kvk chcdx ncjkvcr tzrwnhr ntk dcw qzlvt mdffwvp nrv zvbc hpdczszh mrmfdlmq wlhszdnr zqg ttvm xmnhbhsm nmgn whw dqwk zmclgfxv pwfkscnd fzjqbs wdktct zcmtn hkxg zlgjdq dknpjn rkdh kckvqw tskszbt tlnsp dhvh tcgc pfgfp twqqqd dtdmqvt xqm fvdxj xxrtp lrdb mwmb kppg zngkwr gvr qfhkk hxbdddv bnqktj ptc lvdzshr qzjgt bjh khdqpcpc bhdgdq sjr gft dxnhz tvz kwv lllsdzxz dvnfhvc tfzxprd qfgk rqnxbpzh xgzq lfffd txds swmrvnx wpztnhsx dbvknjcw bsd zkhlpqd bdgsmldn qvxnzbh zxfwr lkqsgjv pfk pjqrbt jkq wdnqjwx jtgztncn mqnbq zfq zrwvjd sdw fgx hmzqg nzdstfm gwjncm kmwbztr rprqvz pczbnrb jjsbnjwv lnfhs wglncbbb xcvckzwp hhzkkxlz bfgzdmmq msgvqccf fjd gzbmzm lwmzfm hnq tfrckj glt scjfhwv dgfjzkx hlmjqq ngdvgld sqrcsdhh gjprqp nrpjcjxz xdln vhhnnn pqwl frrfsj xhntp nqm kvgm rcxkq pmpwrknv xmjf vwxl wfgwbzn csnbzclx czdh kbknrkc lxvbln ksrgdc jzdpnx tznk dqj wblm bbhd dfmsg rdn fqdz vrwrrvl hzp mklzsj nrgzpccf lxrbzhp lmblbcdm mkkwd vrfhsf zmtjffgn tnhlwtlk qdcz ftpbll dxtqsld dzrmjsph jgch
hvvw krjjdd dcnppgx ftmrnzp ktjvng tcwwz prfvvqfb hsdpgnb lvwsntc qxnlbpdj hshzd rmkwz qhq jwq wwbflk nbwpgh pfvjxzcm rvn rvkwbz cqwqj ngkg wdvqv xbcskzs fpr nfsznq gcxjb qbp vbsslcmw qzkxvrv fmm dgfm mtlzj jzkzpg nvsz ndxhx mrg pdhgtl vhzklhbj fxdfxx bjqmkwk svkfhwm sthnmkpk vntcwtw rxjjzzn ncglsrz nwkbn hqfjmwsv mdfvxq wbmlz tzqjt hsxffbbz xlq pwbprr jktl nqrkdc mdtl zqzzzhbt stctrw skrr gzpzq nzsqtstd pwqx sjwzfpq xjkpqhnn qkskq hdjxt rxrzdfd bcmcxz lkb pxbqbpr vwg nrcxngj sjjhh ltznmgz nvqn zkb zxvdzrf xrvhpphv nbfcft npqlm rcdvb vhh npzq pzfhrwlw rpg xsdbm wtcgnb dmfwcjgt pqtlxxr tjp hrskr kkchnphv vczlt zxrfd pbk zbzndd vzsbtwdz vrcxw fgbqpb lnhsvg qgjktk ctzp vwhmwm dfndbzd kwpv qsfc bspkv rlmwh xsqw mgsnsrt vkjsrq tnsrz fckpt vddn zncmtl fsd cgljjxh bwrr ffkkbmnb vslqfqff xbqxdsh xgnblmqx sjmqdcr mzvzjlr btlt cpq tggbxwr xnr cbb jbp bpbrssw jnxxsrx ctxm dwlx jvrcckvh klxk rzjj wqwbsl dhgq zsmfkjh kfpjds gvhr tzxnvw krzvsdr bws fnmgpcf skgc qjq xxdsrd lntsk gmcklkq tmfns wbv mhgxpzb tvfz rdzqzmht fxjnh wlrvscv spvmb gjjlfh jtttmh ddjcpdhz lql wmmmhqv nhdtrh hwjnhnv rlmljhcl jtrmdcx ldckff zznnvp zsmkfhdh bjpzxclw hrbv dhrdrqj vdvlblzl zjd lsclbdls tckmc pkkn ngjccpp gwqf wlnl drpks psffpzng jlpd lbkxbr lcmxr ztvgjzq xdhrhwbb qmlkswmr cfk fldtn bqm hbxtgl ltg vlblzc ppzxxmnb gtk whxsnzbj pkvgdfg mlnbtth mwbtmfc cbr pxvthgjv mfkgbkm mvqvd lbnxmnpp rltcthd xjfb xwwgfr msb bkx wzqdf wfksv hcn qgftdcqh wdwktskm vvwf wchfj dnngkdz thxtd tkrnnkx rfwmmtl hdxd vtwtwxsz njpq jbmlkkdz rdjr rfj rkhfn lnv xntzf jwthqdwc hdkstn vpjzxn jcm vhnwvljl bblbpcnd zpphr bkwhb jxgjktsj fnlqm sbwtfgqw ttqchfvj lnxwzz bxcsmw kgk kdf nvcqrb trfdhwqr xnlxcmts whskss khzwzbrd pggdq vhqvm gjjh jhhsz djdzk pbzznsw wshjp lnl rzpm qjphxcqb jnhbwzpj xlrh pntzljq lxgzrqfz wbc wlt zzjltrvp glv lzvcht pvtqlvqx xldw tzgndw vptx wcxtrbm lpptfgdb vmmjzw dtk lbzph wvjj jlc jgl bhllmwj kfgd qpm lzttdtcj lgssc vnkbt dsgq wkk hrqztzgl kdfvsh btrcblts szlv ztsvm hwcjchc wjjkczdp kfzht zltggz wvnvzdv fshqtz jnntcf zglbkhl ngn fpz qxlr vrtsvr wwws shrwkd mdnjf mskdk tmb pnlxwqg wwjgnz wgd jdp kxxpxl zhjtqzb ztr dtqws ljlx hpr tksllfz fvdl jsfnnnft wtfwr svmqhlff qsnx nkmbznhn hsmmk wwsvbzs nkfw ckp bswx kjknwg csr bjwfsjg zscjsh mcbqs kcmbfmhf kbzfr dgp jwrd fvhdmcrf snpp jfbg flxpgswh rjfpzlfl dkxgkgfc smffkkr fhldf qkf bhpr ndmmbs brzl jctfdx ncqmd mkm gvtng btfvd vpks hzbjmmc ssg xmj wppsmsv vwmf rsjbkb zkrl qwzwhck xqpnh djczj kwm vmrcccm zrq nvvt bngbsbpw hdhcz bbmxj vrl wkppxt ckdxxh pmtlb nbqwdqj vkqggrtx mwh vswfth ghxr qtll jpzhk rxnrrfm brvz mbcfds fjgqf jfhzgx qjxssg wjjg cxsfftgq bbgtb qvt vlz fzq gzklssj vvsmcv tjvb wdvr gqzhfq wmw fskmh zmlq hlz gbvjv hwsf xgtmf vfl xcjg hqgrwkdz tzllrc hmlxgt mxjmf qvklmqg rpbqvg cjfcml dwq dqwqwb tjsj vghf sbbfwx dxvvk xlv cvhgs qlmcvmw hnzf njrlnvt qwqzg mlnj tvnxb hrpctkk hrsnczbl hpstfjb qhtgxsbd dwgv gczfcjh wbhfngw mspgkbt qtsqrb"

describe GDD do
  before { @gdd = GDD.new(TEXT_A) }

  context "when using text A" do
    it "should find 14 prepositions" do
      @gdd.find_prepositions.size.should eql(14)
    end

    it "should find 218 verbs" do
      @gdd.find_verbs.size.should eql(218)
    end

    it "should find 44 verbs in first person" do
      @gdd.find_first_person_verbs.size.should eql(44)
    end

    it "should sort and strip repetitions" do
      correct_text = "mtlzj mwmb mwh mwbtmfc mfkgbkm mzvzjlr mgsnsrt mhgxpzb mrmfdlmq mrg mbcfds mvqvd mlnj mlnbtth mspgkbt msgvqccf msb mskdk mdnjf mdtl mdffwvp mdfvxq mkm mklzsj mkkwd mqnbq mcbqs mxjmf nmgn ntk nwkbn nfsznq njpq njrlnvt nzsqtstd nzdstfm npzq npqlm ngn ngjccpp ngdvgld ngkg nhdtrh nrpjcjxz nrgzpccf nrv nrcxngj nbwpgh nbfcft nbqwdqj nvvt nvsz nvqn nvcqrb ndmmbs ndxhx nkmbznhn nkfw nqm nqrkdc ncjkvcr ncglsrz ncqmd tmfns tmb tnhlwtlk tnsrz ttvm ttqchfvj twqqqd tfzxprd tfrckj tjp tjvb tjsj tznk tzgndw tzrwnhr tzllrc tzqjt tzxnvw tggbxwr thxtd trfdhwqr tvnxb tvfz tvz tlnsp tskszbt tscsmtvb tkrnnkx tksllfz tcwwz tcgc tckmc txds wmmmhqv wmw wtfwr wtcgnb wwws wwjgnz wwbflk wwsvbzs wfgwbzn wfksv wjjg wjjkczdp wzqdf wpztnhsx wppsmsv wglncbbb wgd whw whskss whxsnzbj wbmlz wbhfngw wbv wblm wbc wvnvzdv wvjj wlnl wlt wlhszdnr wlrvscv wshjp wdnqjwx wdwktskm wdvr wdvqv wdktct wkppxt wkk wqwbsl wchfj wcxtrbm fmm fnmgpcf fnlqm ftmrnzp ftpbll ffkkbmnb fjgqf fjd fzjqbs fzq fpz fpr fgbqpb fgx fhldf frrfsj "
      correct_text << "fvhdmcrf fvdl fvdxj fldtn flxpgswh fshqtz fsd fskmh fqdz fckpt fxjnh fxdfxx jnntcf jnhbwzpj jnxxsrx jtttmh jtgztncn jtrmdcx jwthqdwc jwrd jwq jfhzgx jfbg jjsbnjwv jzdpnx jzkzpg jpzhk jgl jgch jhhsz jbmlkkdz jbp jvrcckvh jlpd jlc jsfnnnft jdp jktl jkq jcm jctfdx jxgjktsj zmtjffgn zmlq zmclgfxv zngkwr zncmtl ztr ztvgjzq ztsvm zfq zjd zznnvp zzjltrvp zpphr zglbkhl zhjtqzb zrwvjd zrq zbzndd zvbc zltggz zlgjdq zsmfkjh zsmkfhdh zscjsh zkhlpqd zkrl zkb zqzzzhbt zqg zcmtn zxfwr zxrfd zxvdzrf pmtlb pmpwrknv pntzljq pnlxwqg ptc pwfkscnd pwbprr pwqx pfgfp pfvjxzcm pfk pjqrbt pzfhrwlw ppzxxmnb pggdq prfvvqfb pbzznsw pbk pvtqlvqx psffpzng pdhgtl pkvgdfg pkkn pqtlxxr pqwl pczbnrb pxbqbpr pxvthgjv gmcklkq gtk gwjncm gwqf gft gjjh gjjlfh gjprqp gzpzq gzbmzm gzklssj ghxr gbvjv gvtng gvhr gvr glt glv gqzhfq gczfcjh gcxjb hmzqg hmlxgt hnzf hnq hwjnhnv hwsf hwcjchc hzp hzbjmmc hpr hpstfjb hpdczszh hhzkkxlz hrpctkk hrbv hrsnczbl hrskr hrqztzgl hbxtgl hvvw hlmjqq hlz hsmmk hshzd hsdpgnb hsxffbbz hdjxt hdhcz hdkstn hdxd hkxg hqfjmwsv hqgrwkdz hcn hxbdddv rmkwz rfwmmtl rfj rjfpzlfl rzjj rzpm rpg rprqvz rpbqvg rvn rvkwbz rlmwh rlmljhcl rltcthd rsjbkb rdn rdjr rdzqzmht rkhfn rkdh rqnxbpzh rcdvb rcxkq rxnrrfm rxjjzzn rxrzdfd bngbsbpw bnqktj btfvd btrcblts btlt bwrr bws bfgzdmmq bjwfsjg bjpzxclw bjh bjqmkwk bpbrssw bhpr bhllmwj bhdgdq brzl brvz bbmxj bbgtb bbhd bblbpcnd bswx bspkv bsd bdgsmldn bkwhb bkx bqm bcmcxz bxcsmw vmmjzw vmrcccm vntcwtw vnkbt vtwtwxsz vwmf vwg vwhmwm vwxl vfl vzsbtwdz vptx vpjzxn vpks vghf vhnwvljl vhzklhbj vhh vhhnnn vhqvm vrtsvr vrwrrvl vrfhsf vrl vrcxw vbsslcmw vvwf vvsmcv vlz vlblzc vswfth vslqfqff vdvlblzl vddn vkjsrq vkqggrtx vczlt lmblbcdm lntsk lnfhs lnhsvg lnv lnl lnxwzz ltznmgz ltg lwmzfm lfffd ljlx lzttdtcj lzvcht lpptfgdb lgssc lrdb lbnxmnpp lbzph lbkxbr lvwsntc lvdzshr lllsdzxz lsclbdls ldckff lkb lkqsgjv lql lcmxr lxgzrqfz lxrbzhp lxvbln smffkkr snpp sthnmkpk stctrw swmrvnx sjmqdcr sjwzfpq sjjhh sjr szlv spvmb shrwkd sbwtfgqw sbbfwx svmqhlff svkfhwm ssg sdw skgc skrr sqrcsdhh scjfhwv dmfwcjgt dnngkdz dtdmqvt dtk dtqws dwgv dwlx dwq dfmsg dfndbzd djdzk djczj dzrmjsph dgfm dgfjzkx dgp dhgq dhrdrqj dhvh drpks dbvknjcw dvnfhvc dsgq ddjcpdhz dknpjn dkxgkgfc dqwk dqwqwb dqj dcnppgx dcw dxnhz dxtqsld dxvvk kmwbztr ktjvng kwm kwpv kwv kfzht kfpjds kfgd kjknwg kppg kgk khzwzbrd khdqpcpc krjjdd krzvsdr kbzfr kbknrkc kvgm kvk klxk ksrgdc kdf kdfvsh kkchnphv kcmbfmhf kckvqw kxxpxl qmlkswmr qtll qtsqrb qwzwhck qwqzg qfgk qfhkk qjphxcqb qjq qjxssg qzjgt qzlvt qzkxvrv qpm qgftdcqh qgjktk qhtgxsbd qhq qbp qvt qvklmqg qvxnzbh qlmcvmw qsnx qsfc qdcz qkf qkskq qxnlbpdj qxlr ctzp ctxm cfk cjfcml czdh cpq cgljjxh chcdx cbr cbb cvhgs csnbzclx cstfcg csr ckp ckdxxh cqwqj cxsfftgq xmnhbhsm xmj xmjf xntzf xnr xnlxcmts xwwgfr xjfb xjkpqhnn xgnblmqx xgtmf xgzq xhntp xrvhpphv xbqxdsh xbcskzs xlrh xlv xldw xlq xsdbm xsqw xdhrhwbb xdln xqm xqpnh xcjg xcvckzwp xxrtp xxdsrd"

      @gdd.sort_and_strip_repetitions.should eql(correct_text)
    end

    it "should return 86 beautiful numbers" do
      @gdd.find_beautiful_numbers.size.should eql(86)
    end
  end
end

describe GooglonWord do
  before { @goo = GooglonWord.new("cstfcg") }

  it "should return the number value for the word 'kvk' based on the alphabet" do
    GooglonWord.new("kvk").to_sort_number.should == 16121600000000000000
  end

  it "should return the number value for the word 'cstfcg' based on the alphabet" do
    @goo.to_sort_number.should == 18140204180800000000
  end

  it "should sort words based on the Googlon alphabet" do
    text = [
      GooglonWord.new("mwbtmfc"),
      GooglonWord.new("mwmb"),
      GooglonWord.new("mtlzj"),
      GooglonWord.new("mwh")
    ]
    text.sort.should == [text[2],text[1],text[3],text[0]]
  end

  it "should return the number for a given word" do
    @goo.to_i.should == 28513098
  end

  it "should return false if the number is not beautiful" do
    @goo.beautiful_number?.should be_false
  end

  it "should return true if the number is beautiful" do
    GooglonWord.new("mspgkbt").beautiful_number?.should be_true
  end
end
